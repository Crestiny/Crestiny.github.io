<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.0.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Crestiny&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="Crestiny&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="CrestinyCoco">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Crestiny's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Crestiny's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Life is fantastic ! </p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/12/Chapter9-IP%E5%AE%89%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/12/Chapter9-IP%E5%AE%89%E5%85%A8/" class="post-title-link" itemprop="url">Chapter9 IP安全</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-12 09:14:17" itemprop="dateCreated datePublished" datetime="2020-10-12T09:14:17+08:00">2020-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-04 14:49:47" itemprop="dateModified" datetime="2021-01-04T14:49:47+08:00">2021-01-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BA%94%E7%94%A8%E4%B8%8E%E6%A0%87%E5%87%86%EF%BC%88E5%EF%BC%89%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《网络安全基础：应用与标准（E5）》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>防重放攻击，一般通过序列号或者时间戳</p>
<h2 id="9-1-IP安全概述"><a class="header-anchor" href="#9-1-IP安全概述">¶</a>9.1 IP安全概述</h2>
<p>之前学的Kerberos、TLS/SSL、S/MIME、PGP，都是用来保护应用安全的，其实协议安全也很重要<br>
在IP中加入认证和加密机制来保障终端用户安全，这样的话，即便上层没有安全机制也可以保证安全</p>
<p>IP层安全包括：</p>
<ul>
<li>认证</li>
<li>保密</li>
<li>密钥管理机制：保证密钥交换安全</li>
</ul>
<h3 id="9-1-1-IPSec的应用"><a class="header-anchor" href="#9-1-1-IPSec的应用">¶</a>9.1.1 IPSec的应用</h3>
<h4 id="（1）IPSec适用范围"><a class="header-anchor" href="#（1）IPSec适用范围">¶</a>（1）IPSec适用范围</h4>
<p>LAN、专用和公用WAN、互联网</p>
<h4 id="（2）用途"><a class="header-anchor" href="#（2）用途">¶</a>（2）用途</h4>
<ul>
<li>通过互联网安全分支机构接入：</li>
<li>通过互联网进行安全远程访问：</li>
<li>与合作者建立企业间联网和企业内联网接入：</li>
<li>加强电子商务安全性：</li>
</ul>
<h4 id="（3）IPSec典型方案"><a class="header-anchor" href="#（3）IPSec典型方案">¶</a>（3）IPSec典型方案</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210102220557.png" alt=""></p>
<h3 id="9-1-2-IPSec的好处"><a class="header-anchor" href="#9-1-2-IPSec的好处">¶</a>9.1.2 IPSec的好处</h3>
<h3 id="9-1-3-路由应用"><a class="header-anchor" href="#9-1-3-路由应用">¶</a>9.1.3 路由应用</h3>
<p>IPSec其实在互联网的路由结构中也有很重要的作用，例如它可以确保：</p>
<ul>
<li>路由器广播来自授权的路由器</li>
<li>邻居广播来自授权的路由器</li>
<li>重定向报文</li>
<li>路由更新未被伪造</li>
</ul>
<h3 id="9-1-4-IPSec文档"><a class="header-anchor" href="#9-1-4-IPSec文档">¶</a>9.1.4 IPSec文档</h3>
<h3 id="9-1-5-IPSec服务"><a class="header-anchor" href="#9-1-5-IPSec服务">¶</a>9.1.5 IPSec服务</h3>
<p>IPSec提供以下服务：</p>
<ul>
<li>访问控制</li>
<li>无连接完整性</li>
<li>数据源认证</li>
<li>拒绝重放包</li>
<li>保密性</li>
<li>受限制的流量保密性</li>
</ul>
<p>有两种协议可以提供安全性：</p>
<ul>
<li>AH：用于提供消息认证的扩展头</li>
<li>ESP：加密与认证结合的协议</li>
</ul>
<h3 id="9-1-6-传输模式和隧道模式"><a class="header-anchor" href="#9-1-6-传输模式和隧道模式">¶</a>9.1.6 传输模式和隧道模式</h3>
<p>AH和ESP都用两种模式，这里做个简介：</p>
<ul>
<li>传输模式：为上层协议提供保护，也就是对IP数据包的载荷进行保护
<ul>
<li>AH：认证IP载荷+IP报头选中的部分</li>
<li>ESP：加密和认证IP载荷</li>
</ul>
</li>
<li>隧道模式：对整个IP包提供保护，把原来的包+安全域，一起作为载荷套在新的IP包内
<ul>
<li>AH：认证整个内部IP包+外部IP报头被选中的部分</li>
<li>ESP：加密和认证整个内部IP包</li>
</ul>
</li>
</ul>
<h2 id="9-2-IP安全策略"><a class="header-anchor" href="#9-2-IP安全策略">¶</a>9.2 IP安全策略</h2>
<h3 id="9-2-1-安全关联"><a class="header-anchor" href="#9-2-1-安全关联">¶</a>9.2.1 安全关联</h3>
<p>IPSec安全策略实际上由两个交互的数据库确定：安全关联数据库SAD和安全策略数据库SPD</p>
<p>那个图看不太懂（？）</p>
<p>安全关联SA：发送端与接收端之间用于对它们之间传递的<strong>数据流提供安全服务</strong>的一个单向逻辑连接，如果要双向，就要两个SA<br>
SA提供的安全服务取决于使用的安全协议AH/ESP</p>
<p>一个SA由三个参数确定：</p>
<ul>
<li>安全参数索引SPI：</li>
<li>IP目的地址：目的端点地址</li>
<li>安全协议标识：AH/ESP</li>
</ul>
<p>IPSec使用SA协商的参数（密码算法，相关的参数等等），有一部分在ESP数据包中传送，IPSec感觉定义的是一种“工作流程”？</p>
<h3 id="9-2-2-安全关联数据库SAD"><a class="header-anchor" href="#9-2-2-安全关联数据库SAD">¶</a>9.2.2 安全关联数据库SAD</h3>
<p>每个IPSec的实现中都有一个名义的SAD，所谓名义，是说：<br>
SAD说明IPSec需要具备的功能，不负责定义具体实现，这个由IPSec自己决定</p>
<p>SAD中的SA用以下参数定义：</p>
<p>不同SA的不同组合可以使用户获得自己理想的配置</p>
<h3 id="9-2-3-安全策略数据库SPD"><a class="header-anchor" href="#9-2-3-安全策略数据库SPD">¶</a>9.2.3 安全策略数据库SPD</h3>
<p>（突然感觉这个好像防火墙啊！）（？）</p>
<p>SPD中说明了IP流量与什么SA相关联</p>
<p>如何用SPD处理IP数据包？</p>
<ul>
<li>取IP数据包中的信息（字段值）判断，看符合哪个SPD入口</li>
<li>如果该数据包存在SA，那就根据对应的入口确定SA</li>
<li>执行所需的IPSec处理（AH或ESP处理）</li>
</ul>
<p>判断字段值可以用选择器，一般依据是IP地址、下层协议等等</p>
<p>某主机上SPD的一个例子：</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210103125634.png" alt=""></p>
<h3 id="9-2-4-IP通信进程"><a class="header-anchor" href="#9-2-4-IP通信进程">¶</a>9.2.4 IP通信进程</h3>
<h4 id="（1）IPSec作用位置"><a class="header-anchor" href="#（1）IPSec作用位置">¶</a>（1）IPSec作用位置</h4>
<p>IPSec的作用单位：IP包，如果是往外面发的，则发之前要IPSec处理；如果是收进来的，往上层传的时候要处理</p>
<h4 id="（2）出站报文"><a class="header-anchor" href="#（2）出站报文">¶</a>（2）出站报文</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE278.png" alt=""></p>
<h4 id="（3）入站报文"><a class="header-anchor" href="#（3）入站报文">¶</a>（3）入站报文</h4>
<p>和出站报文的处理不太一样，这里是SAD和SPD二者选其一的</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE277.png" alt=""></p>
<h2 id="9-3-封装安全载荷ESP"><a class="header-anchor" href="#9-3-封装安全载荷ESP">¶</a>9.3 封装安全载荷ESP</h2>
<p>这章是对ESP的详解</p>
<p>ESP可以提供的服务包括：</p>
<ul>
<li>机密性</li>
<li>数据源认证</li>
<li>中断连接后的完整性</li>
<li>一次抗重放攻击服务</li>
<li>流量机密性</li>
</ul>
<p>具体提供哪些要看SA的选择</p>
<h3 id="9-3-1-ESP格式"><a class="header-anchor" href="#9-3-1-ESP格式">¶</a>9.3.1 ESP格式</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE276.png" alt=""></p>
<h3 id="9-3-2-加密和认证算法"><a class="header-anchor" href="#9-3-2-加密和认证算法">¶</a>9.3.2 加密和认证算法</h3>
<p>IV</p>
<p>ICV</p>
<h3 id="9-3-3-填充"><a class="header-anchor" href="#9-3-3-填充">¶</a>9.3.3 填充</h3>
<p>填充域有如下几个作用：</p>
<h3 id="9-3-4-防止重放服务"><a class="header-anchor" href="#9-3-4-防止重放服务">¶</a>9.3.4 防止重放服务</h3>
<p>IPSec规定了一种窗口模式</p>
<h3 id="9-3-5-传输模式和隧道模式"><a class="header-anchor" href="#9-3-5-传输模式和隧道模式">¶</a>9.3.5 传输模式和隧道模式</h3>
<h4 id="（1）两种模式的比较"><a class="header-anchor" href="#（1）两种模式的比较">¶</a>（1）两种模式的比较</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210103195235.png" alt=""></p>
<h4 id="（2）传输模式ESP"><a class="header-anchor" href="#（2）传输模式ESP">¶</a>（2）传输模式ESP</h4>
<p>传输模式操作流程：</p>
<ul>
<li>先加密后认证（认证可选）</li>
<li>数据包路由到目的地，不需要检查密文部分</li>
<li>目的节点经检查ESP报头中的SPI，解密数据包</li>
</ul>
<h4 id="（3）隧道模式ESP"><a class="header-anchor" href="#（3）隧道模式ESP">¶</a>（3）隧道模式ESP</h4>
<p>新的IP报头中的信息，可以为路由提供足够信息，但不为流量分析提供信息</p>
<p>隧道模式操作流程：</p>
<ul>
<li>对以ESP为前缀的原IP包，进行加密、认证，封装新的IP报头</li>
<li>将外部IP包路由，中间路由器和防火墙只检查外部的</li>
<li>目的地节点解密，把明文数据包在内网中传送，送到目的地主机</li>
</ul>
<p>总结一下这两种模式：</p>
<ul>
<li>传输模式适合保护（支持ESP特性的）主机之间的连接</li>
<li>隧道模式在含有防火墙的情况下，可以用来让可信数据包穿过防火墙</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE275.png" alt=""></p>
<h2 id="9-4-安全关联组合"><a class="header-anchor" href="#9-4-安全关联组合">¶</a>9.4 安全关联组合</h2>
<p>同一个流量，可能要多个SA组合才能得到想要的IPSec服务，这些SA就叫安全关联束</p>
<p>SA之间怎么组合成安全关联束呢？</p>
<ul>
<li>传输邻接：（？）</li>
<li>隧道迭代：多层嵌套</li>
</ul>
<h3 id="9-4-1-认证和加密"><a class="header-anchor" href="#9-4-1-认证和加密">¶</a>9.4.1 认证和加密</h3>
<p>下面讨论一下几种实现认证加保密的方法：</p>
<h4 id="（1）带认证选项的ESP"><a class="header-anchor" href="#（1）带认证选项的ESP">¶</a>（1）带认证选项的ESP</h4>
<p>先用ESP，然后认证</p>
<p>（？）IPSec、AH、ESP、SAD、SPD之间的关系是什么？</p>
<p>认证的是密文而不是明文</p>
<h4 id="（2）传输邻接"><a class="header-anchor" href="#（2）传输邻接">¶</a>（2）传输邻接</h4>
<p>加密之后，添加两个报头，内部是ESP，外部是AH</p>
<h4 id="（3）传输-隧道束"><a class="header-anchor" href="#（3）传输-隧道束">¶</a>（3）传输-隧道束</h4>
<p>加密之后，添加两个报头，内部是AH，外部是ESP</p>
<h3 id="9-4-2-安全关联的基本组合"><a class="header-anchor" href="#9-4-2-安全关联的基本组合">¶</a>9.4.2 安全关联的基本组合</h3>
<p>介绍了IPSec文档中要求的主机必须有的4种SA组合</p>
<h2 id="9-5-因特网密钥交换"><a class="header-anchor" href="#9-5-因特网密钥交换">¶</a>9.5 因特网密钥交换</h2>
<p>一个典型的要求：4个密钥——发送者公钥私钥+接收者公钥私钥</p>
<p>IPSec文档要求支持的密钥管理类型：</p>
<ul>
<li>手动类型</li>
<li>自动类型</li>
</ul>
<p>IKE是什么——因特网密钥交换协议</p>
<p>自动类型的密钥管理默认有：</p>
<ul>
<li>Oakley协议</li>
<li>ISAKMP协议</li>
</ul>
<h3 id="9-5-1-密钥确定协议"><a class="header-anchor" href="#9-5-1-密钥确定协议">¶</a>9.5.1 密钥确定协议</h3>
<p>IKE密钥确定是DH密钥交换算法的细化</p>
<h4 id="（1）DH算法流程"><a class="header-anchor" href="#（1）DH算法流程">¶</a>（1）DH算法流程</h4>
<ul>
<li>选定两个全局参数</li>
<li>A选一个x，传一个y；B也一样</li>
<li>每一方都可以算出同一个值</li>
</ul>
<h4 id="（2）DH算法优点"><a class="header-anchor" href="#（2）DH算法优点">¶</a>（2）DH算法优点</h4>
<ul>
<li>仅在需要时生成密钥</li>
<li>仅需要全局参数一致</li>
</ul>
<h4 id="（3）DH算法弱点"><a class="header-anchor" href="#（3）DH算法弱点">¶</a>（3）DH算法弱点</h4>
<ul>
<li>没有认证双方</li>
<li>易受中间人攻击</li>
<li>密集型计算易受拥塞攻击</li>
</ul>
<h4 id="（4）IKE密钥确定"><a class="header-anchor" href="#（4）IKE密钥确定">¶</a>（4）IKE密钥确定</h4>
<p>有5点特性：</p>
<p>2点是原来DH的性质：</p>
<ul>
<li>双方协商得到一个组</li>
<li>双方交换公钥</li>
</ul>
<p>3点是防攻击：</p>
<ul>
<li>Cookie防拥塞</li>
<li>随机数防重放</li>
<li>认证，从而阻止中间人攻击</li>
</ul>
<p>接下来是一些细节</p>
<h4 id="（5）IKEv2密钥交换"><a class="header-anchor" href="#（5）IKEv2密钥交换">¶</a>（5）IKEv2密钥交换</h4>
<p>感觉是先做密钥交换，再开始交换信息</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210103232118.png" alt=""></p>
<h3 id="9-5-2-报头和载荷格式"><a class="header-anchor" href="#9-5-2-报头和载荷格式">¶</a>9.5.2 报头和载荷格式</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE274.png" alt=""></p>
<h2 id="9-6-密码套件"><a class="header-anchor" href="#9-6-密码套件">¶</a>9.6 密码套件</h2>
<p>IPSec和IKE依赖多种密码算法，而且每个算法的参数又多</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/12/Chapter5-%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%92%8C%E4%BA%91%E5%AE%89%E5%85%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/12/Chapter5-%E7%BD%91%E7%BB%9C%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%92%8C%E4%BA%91%E5%AE%89%E5%85%A8/" class="post-title-link" itemprop="url">Chapter5 网络访问控制和云安全</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-12 08:54:14" itemprop="dateCreated datePublished" datetime="2020-10-12T08:54:14+08:00">2020-10-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-31 20:33:29" itemprop="dateModified" datetime="2020-12-31T20:33:29+08:00">2020-12-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BA%94%E7%94%A8%E4%B8%8E%E6%A0%87%E5%87%86%EF%BC%88E5%EF%BC%89%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《网络安全基础：应用与标准（E5）》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="5-1-网络访问控制"><a class="header-anchor" href="#5-1-网络访问控制">¶</a>5.1 网络访问控制</h2>
<p>简称NAC，大概包括：登录认证+决定用户可以访问哪些数据+执行哪些操作+检查用户端设备的安全程度</p>
<h3 id="5-1-1-网络访问控制系统的组成元素"><a class="header-anchor" href="#5-1-1-网络访问控制系统的组成元素">¶</a>5.1.1 网络访问控制系统的组成元素</h3>
<h4 id="（1）组成成分"><a class="header-anchor" href="#（1）组成成分">¶</a>（1）组成成分</h4>
<ul>
<li>访问请求者AR</li>
<li>策略服务器</li>
<li>网络访问服务器NAS</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231195151.png" alt=""></p>
<h3 id="5-1-2-网络访问强制措施"><a class="header-anchor" href="#5-1-2-网络访问强制措施">¶</a>5.1.2 网络访问强制措施</h3>
<p>可以对AR使用一种或多种强制措施，以管理其访问</p>
<p>常用的NAC强制措施见书P114</p>
<h2 id="5-2-可扩展认证协议EAP"><a class="header-anchor" href="#5-2-可扩展认证协议EAP">¶</a>5.2 可扩展认证协议EAP</h2>
<p>EAP是网络访问、认证协议的框架，封装了许多认证方法</p>
<h3 id="5-2-1-认证方法"><a class="header-anchor" href="#5-2-1-认证方法">¶</a>5.2.1 认证方法</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231195844.png" alt=""></p>
<h3 id="5-2-2-EAP交换协议"><a class="header-anchor" href="#5-2-2-EAP交换协议">¶</a>5.2.2 EAP交换协议</h3>
<h4 id="（1）EAP目标"><a class="header-anchor" href="#（1）EAP目标">¶</a>（1）EAP目标</h4>
<p>EAP目标：成功认证</p>
<p>认证成功标志：EAP信息进行交换，认证者允许被认证者的访问，被认证者同意使用此次访问</p>
<h4 id="（2）EAP典型布局"><a class="header-anchor" href="#（2）EAP典型布局">¶</a>（2）EAP典型布局</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231201250.png" alt=""></p>
<h2 id="5-3-IEEE-802-1X基于端口的网络访问控制"><a class="header-anchor" href="#5-3-IEEE-802-1X基于端口的网络访问控制">¶</a>5.3 IEEE 802.1X基于端口的网络访问控制</h2>
<p>这是为局域网提供访问控制功能的</p>
<h3 id="5-3-1-802-1X访问控制"><a class="header-anchor" href="#5-3-1-802-1X访问控制">¶</a>5.3.1 802.1X访问控制</h3>
<h3 id="5-3-2-EAPOL包"><a class="header-anchor" href="#5-3-2-EAPOL包">¶</a>5.3.2 EAPOL包</h3>
<h2 id="5-4-云计算"><a class="header-anchor" href="#5-4-云计算">¶</a>5.4 云计算</h2>
<p>将信息技术操作移到联网的基础设施上</p>
<h3 id="5-4-1-云计算组成元素"><a class="header-anchor" href="#5-4-1-云计算组成元素">¶</a>5.4.1 云计算组成元素</h3>
<h4 id="（1）云计算定义与组成"><a class="header-anchor" href="#（1）云计算定义与组成">¶</a>（1）云计算定义与组成</h4>
<h4 id="（2）云计算主要特征"><a class="header-anchor" href="#（2）云计算主要特征">¶</a>（2）云计算主要特征</h4>
<h4 id="（3）NIST定义的3种服务模型"><a class="header-anchor" href="#（3）NIST定义的3种服务模型">¶</a>（3）NIST定义的3种服务模型</h4>
<h4 id="（4）NIST定义的4种部署模型"><a class="header-anchor" href="#（4）NIST定义的4种部署模型">¶</a>（4）NIST定义的4种部署模型</h4>
<h3 id="5-4-2-云计算参考架构"><a class="header-anchor" href="#5-4-2-云计算参考架构">¶</a>5.4.2 云计算参考架构</h3>
<h2 id="5-5-云安全风险和对策"><a class="header-anchor" href="#5-5-云安全风险和对策">¶</a>5.5 云安全风险和对策</h2>
<h2 id="5-6-云端数据保护"><a class="header-anchor" href="#5-6-云端数据保护">¶</a>5.6 云端数据保护</h2>
<h2 id="5-7-云安全即服务"><a class="header-anchor" href="#5-7-云安全即服务">¶</a>5.7 云安全即服务</h2>
<p>SecaaS——安全服务商提供服务（以前是企业提供）</p>
<h3 id="5-7-1-SecaaS服务类型"><a class="header-anchor" href="#5-7-1-SecaaS服务类型">¶</a>5.7.1 SecaaS服务类型</h3>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/09/Reverse-Linked-List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/09/Reverse-Linked-List/" class="post-title-link" itemprop="url">Reverse Linked List</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-09 16:55:31 / 修改时间：16:57:10" itemprop="dateCreated datePublished" datetime="2020-10-09T16:55:31+08:00">2020-10-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Top-100-Liked-Questions/" itemprop="url" rel="index"><span itemprop="name">Leetcode Top 100 Liked Questions</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Description</h1>
<p>Reverse a singly linked list.</p>
<h1>Input&amp;Output</h1>
<p>Input: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL<br>
Output: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</p>
<h1>Analysis</h1>
<p>感觉二叉树经常会用递归，我们应该一直走到底，将两个叶节点交换，然后再一路往上……<br>
妙啊，越写越快了！</p>
<h1>Code</h1>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition for singly-linked list.</span><br><span class="line"> * public class ListNode {</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode next;</span><br><span class="line"> *     ListNode() {}</span><br><span class="line"> *     ListNode(int val) { this.val = val; }</span><br><span class="line"> *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }</span><br><span class="line"> * }</span><br><span class="line"> */</span><br><span class="line">class Solution {</span><br><span class="line">    public ListNode reverseList(ListNode head) {</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/30/Invert-Binary-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/30/Invert-Binary-Tree/" class="post-title-link" itemprop="url">Invert Binary Tree</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-30 20:29:49" itemprop="dateCreated datePublished" datetime="2020-09-30T20:29:49+08:00">2020-09-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-28 02:13:13" itemprop="dateModified" datetime="2020-12-28T02:13:13+08:00">2020-12-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Top-100-Liked-Questions/" itemprop="url" rel="index"><span itemprop="name">Leetcode Top 100 Liked Questions</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Description</h1>
<p>Invert a binary tree.</p>
<h1>Input&amp;Output</h1>
<p><img src="%5CInvert-Binary-Tree%5CIO.png" alt=""></p>
<h1>Analysis</h1>
<p>感觉二叉树经常会用递归，我们应该一直走到底，将两个叶节点交换，然后再一路往上……<br>
妙啊，越写越快了！</p>
<h1>Code</h1>
<pre><code>/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode() {}
 *     TreeNode(int val) { this.val = val; }
 *     TreeNode(int val, TreeNode left, TreeNode right) {
 *         this.val = val;
 *         this.left = left;
 *         this.right = right;
 *     }
 * }
 */
class Solution {
    public TreeNode invertTree(TreeNode root) {

        if(root==null){
            return null;
        }else{
            if(root.left==null&amp;&amp;root.right==null){
                return root;
            }
            root.left=invertTree(root.left);
            root.right=invertTree(root.right);
            TreeNode temp=new TreeNode();
            temp=root.left;
            root.left=root.right;
            root.right=temp;
        
            return root;
        }

    }
}
</code></pre>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/30/Single-Number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/30/Single-Number/" class="post-title-link" itemprop="url">Single Number</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-30 19:53:46 / 修改时间：20:31:13" itemprop="dateCreated datePublished" datetime="2020-09-30T19:53:46+08:00">2020-09-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Top-100-Liked-Questions/" itemprop="url" rel="index"><span itemprop="name">Leetcode Top 100 Liked Questions</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Description</h1>
<p>Given a non-empty array of integers, every element appears twice except for one. Find that single one.</p>
<p><em>NOTE：Your algorithm should have a linear runtime complexity. Could you implement it without using extra memory?</em></p>
<h1>Input&amp;Output</h1>
<p><img src="/2020/09/30/Single-Number/%5CSingle-Number%5CIO.png" alt=""></p>
<h1>Code</h1>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">class Solution {</span><br><span class="line">    public int singleNumber(int[] nums) {</span><br><span class="line">        int i=1;</span><br><span class="line">        </span><br><span class="line">        java.util.Arrays.sort(nums);</span><br><span class="line">        </span><br><span class="line">        if(nums.length==1){</span><br><span class="line">            return nums[0];</span><br><span class="line">        }else if(nums[0]!=nums[1]){</span><br><span class="line">            return nums[0];</span><br><span class="line">        }else if(nums[nums.length-1]!=nums[nums.length-1]){</span><br><span class="line">            return nums[nums.length-1];</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        for(;i&lt;nums.length-1;i++){</span><br><span class="line">            if(nums[i]==nums[i-1]||nums[i]==nums[i+1]){</span><br><span class="line">                continue;</span><br><span class="line">            }else{</span><br><span class="line">                break;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        return nums[i];</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/30/Maximum-Depth-of-Binary-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/30/Maximum-Depth-of-Binary-Tree/" class="post-title-link" itemprop="url">Maximum Depth of Binary Tree</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-09-30 19:11:22 / 修改时间：19:52:44" itemprop="dateCreated datePublished" datetime="2020-09-30T19:11:22+08:00">2020-09-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode-Top-100-Liked-Questions/" itemprop="url" rel="index"><span itemprop="name">Leetcode Top 100 Liked Questions</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1>Description</h1>
<p>Given a binary tree, find its maximum depth.</p>
<p>The maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node.</p>
<h1>Input&amp;Output</h1>
<p><img src="/2020/09/30/Maximum-Depth-of-Binary-Tree/%5CMaximum-Depth-of-Binary-Tree%5CIO.png" alt=""></p>
<h1>Analysis</h1>
<p>大致的思路是，一直往下，过程中有计数器，到底了就返回数字啥的</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition for a binary tree node.</span><br><span class="line"> * public class TreeNode {</span><br><span class="line"> *     int val;</span><br><span class="line"> *     TreeNode left;</span><br><span class="line"> *     TreeNode right;</span><br><span class="line"> *     TreeNode() {}</span><br><span class="line"> *     TreeNode(int val) { this.val = val; }</span><br><span class="line"> *     TreeNode(int val, TreeNode left, TreeNode right) {</span><br><span class="line"> *         this.val = val;</span><br><span class="line"> *         this.left = left;</span><br><span class="line"> *         this.right = right;</span><br><span class="line"> *     }</span><br><span class="line"> * }</span><br><span class="line"> */</span><br><span class="line">class Solution {</span><br><span class="line">    int depth=0;</span><br><span class="line">    </span><br><span class="line">    public int maxDepth(TreeNode root) {</span><br><span class="line">        if(root!=null){</span><br><span class="line">            depth++;</span><br><span class="line">            if(root.left==null&amp;&amp;root.right==null){</span><br><span class="line">                return depth;</span><br><span class="line">            }</span><br><span class="line">            if(root.left!=null&amp;&amp;root.right==null){</span><br><span class="line">                depth=maxDepth(root.left);</span><br><span class="line">            }       </span><br><span class="line">            if(root.left==null&amp;&amp;root.right!=null){</span><br><span class="line">                depth=maxDepth(root.right);</span><br><span class="line">            }</span><br><span class="line">            if(root.left!=null&amp;&amp;root.right!=null){</span><br><span class="line">                int depthTemp=depth;</span><br><span class="line">                int depthLeft=maxDepth(root.left);</span><br><span class="line">                depth=depthTemp;</span><br><span class="line">                int depthRight=maxDepth(root.right);</span><br><span class="line">                depth=depthLeft&gt;depthRight?depthLeft:depthRight;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        return depth;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/23/Chapter1-%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/23/Chapter1-%E6%A6%82%E8%BF%B0/" class="post-title-link" itemprop="url">Chapter1 Linux操作系统概述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-23 20:22:32" itemprop="dateCreated datePublished" datetime="2020-09-23T20:22:32+08:00">2020-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-02-18 11:31:32" itemprop="dateModified" datetime="2021-02-18T11:31:32+08:00">2021-02-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8ALinux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8-E2-%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《Linux操作系统原理与应用(E2)》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-1-认识操作系统"><a class="header-anchor" href="#1-1-认识操作系统">¶</a>1.1 认识操作系统</h2>
<h3 id="1-1-1-从使用者角度看"><a class="header-anchor" href="#1-1-1-从使用者角度看">¶</a>1.1.1 从使用者角度看</h3>
<p>不用关心具体实现</p>
<h3 id="1-1-2-从程序开发者的角度看"><a class="header-anchor" href="#1-1-2-从程序开发者的角度看">¶</a>1.1.2 从程序开发者的角度看</h3>
<p>不用关心在内存的哪里存放变量，并不需要自己指定</p>
<h3 id="1-1-3-从操作系统在整个计算机系统所处的位置看"><a class="header-anchor" href="#1-1-3-从操作系统在整个计算机系统所处的位置看">¶</a>1.1.3 从操作系统在整个计算机系统所处的位置看</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE174.png" alt=""></p>
<h3 id="1-1-4-从操作系统设计者的角度看"><a class="header-anchor" href="#1-1-4-从操作系统设计者的角度看">¶</a>1.1.4 从操作系统设计者的角度看</h3>
<p>操作系统设计有两个目标：</p>
<ul>
<li>方便用户</li>
<li>资源高效运转</li>
</ul>
<p>操作系统必须包含的部分：</p>
<ul>
<li>操作系统接口</li>
<li>CPU管理</li>
<li>内存管理</li>
<li>设备管理</li>
<li>文件管理</li>
</ul>
<h3 id="1-1-5-操作系统组成"><a class="header-anchor" href="#1-1-5-操作系统组成">¶</a>1.1.5 操作系统组成</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE173.png" alt=""></p>
<h2 id="1-2-开放源代码的UNIX-Linux操作系统"><a class="header-anchor" href="#1-2-开放源代码的UNIX-Linux操作系统">¶</a>1.2 开放源代码的UNIX/Linux操作系统</h2>
<h3 id="1-2-1-UNIX诞生和发展"><a class="header-anchor" href="#1-2-1-UNIX诞生和发展">¶</a>1.2.1 UNIX诞生和发展</h3>
<p>最开始想开发MULTICS，多年以后成功了……后来又因为想要运行一个游戏，为它重写了一套操作系统UNIX（后来用C语言全部重写了）</p>
<h3 id="1-2-2-Linux诞生"><a class="header-anchor" href="#1-2-2-Linux诞生">¶</a>1.2.2 Linux诞生</h3>
<p>UNIX有点贵，芬兰小伙写出了Linux改变了这个局面</p>
<h3 id="1-2-3-操作系统标准POSIX"><a class="header-anchor" href="#1-2-3-操作系统标准POSIX">¶</a>1.2.3 操作系统标准POSIX</h3>
<p>POSIX全称叫：可移植操作系统接口；它是一套标准，任何符合POSIX标准的操作系统，就可以运行UNIX程序</p>
<h3 id="1-2-4-GNU和Linux"><a class="header-anchor" href="#1-2-4-GNU和Linux">¶</a>1.2.4 GNU和Linux</h3>
<p>Linux系统=Linux内核+GNU工具+一些自由软件</p>
<h3 id="1-2-5-Linux的开发模式"><a class="header-anchor" href="#1-2-5-Linux的开发模式">¶</a>1.2.5 Linux的开发模式</h3>
<p>以互联网为纽带，世界各地共同参与</p>
<h2 id="1-3-Linux内核"><a class="header-anchor" href="#1-3-Linux内核">¶</a>1.3 Linux内核</h2>
<h3 id="1-3-1-Linux内核的技术特点"><a class="header-anchor" href="#1-3-1-Linux内核的技术特点">¶</a>1.3.1 Linux内核的技术特点</h3>
<ul>
<li>单内核：把整个内核作为一个大过程来实现，将进程管理、内存管理等拆成一个个模块（微内核：只实现基本的内存管理、进程间通信机制、I/O操作等等，剩下更高级的功能，通过与文件管理等上层模块的通信来解决）</li>
<li>支持动态加载内核模块</li>
<li>被动地提供服务（以用户的请求来驱动）</li>
<li>用了虚存</li>
<li>抽象文件模型——虚拟文件系统VFS</li>
<li>延迟执行机制</li>
</ul>
<h3 id="1-3-2-Linux内核的位置"><a class="header-anchor" href="#1-3-2-Linux内核的位置">¶</a>1.3.2 Linux内核的位置</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210102150309.png" alt=""></p>
<p>​	中间括起来的是Linux内核</p>
<h3 id="1-3-3-Linux内核体系结构"><a class="header-anchor" href="#1-3-3-Linux内核体系结构">¶</a>1.3.3 Linux内核体系结构</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE172.png" alt=""></p>
<h2 id="1-4-Linux内核源代码"><a class="header-anchor" href="#1-4-Linux内核源代码">¶</a>1.4 Linux内核源代码</h2>
<h3 id="1-3-1-Linux内核版本"><a class="header-anchor" href="#1-3-1-Linux内核版本">¶</a>1.3.1 Linux内核版本</h3>
<p>​	其实用.分割的三四个数字是各自有含义的！</p>
<h3 id="1-3-2-Linux内核源代码的结构"><a class="header-anchor" href="#1-3-2-Linux内核源代码的结构">¶</a>1.3.2 Linux内核源代码的结构</h3>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20210102151334.png" alt=""></p>
<h3 id="1-3-3-Linux内核源代码分析工具"><a class="header-anchor" href="#1-3-3-Linux内核源代码分析工具">¶</a>1.3.3 Linux内核源代码分析工具</h3>
<ul>
<li>Linux的LXR</li>
<li>Windows下的source insight（需要先把Linux的源代码放到Windows系统下，直接把/usr/src下的内容拷贝过来就好了）</li>
</ul>
<h2 id="1-5-Linux内核模块编程入门"><a class="header-anchor" href="#1-5-Linux内核模块编程入门">¶</a>1.5 Linux内核模块编程入门</h2>
<p>内核模块=模块=动态可加载内核模块LKM</p>
<p>模块机制是一个插口，实现可扩展性，弥补单内核的缺陷</p>
<h3 id="1-5-1-模块的定义"><a class="header-anchor" href="#1-5-1-模块的定义">¶</a>1.5.1 模块的定义</h3>
<p>模块可以被单独编译，但是不能单独运行，运行时被链接到内核作为内核的一部分在<strong>内核空间</strong>运行</p>
<h3 id="1-5-2-编写一个简单的模块"><a class="header-anchor" href="#1-5-2-编写一个简单的模块">¶</a>1.5.2 编写一个简单的模块</h3>
<h4 id="（1）程序举例"><a class="header-anchor" href="#（1）程序举例">¶</a>（1）程序举例</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE171.png" alt=""></p>
<h4 id="（2）编译"><a class="header-anchor" href="#（2）编译">¶</a>（2）编译</h4>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#Makefile2.6</span><br><span class="line">obj-m : = hellomod.o 	#产生hellomod模块的目标文件</span><br><span class="line">CURRENT_PATH : = $ (shell pwd) 	#模块所在的当前路径，这里直接用shell命令获取</span><br><span class="line">LINUX_KERNEL : = $(shell uname - r) 	#Linux内核源代码的当前版本</span><br><span class="line">LINUX_KERNEL_PATH : = /usr/src/linux - headers - $ (LINUX_KERNEL)  #Linux内核源代码的绝对路径</span><br><span class="line"></span><br><span class="line">all:</span><br><span class="line">make -c $ (LINUX_KERNEL_PATH)M = $ ( CURRENT_PATH) modules   #编译模块</span><br><span class="line">clean:</span><br><span class="line">make -c $ (LINUX_KERNEL_PATH)M= $ ( CURRENT_PATH) clean    #井清理</span><br></pre></td></tr></tbody></table></figure>
<h4 id="（3）运行"><a class="header-anchor" href="#（3）运行">¶</a>（3）运行</h4>
<p>插入和移除就不说了，说下printk</p>
<p>可以用tail /var/log/message查看日志</p>
<h3 id="1-5-3-应用程序与内核模块的比较"><a class="header-anchor" href="#1-5-3-应用程序与内核模块的比较">¶</a>1.5.3 应用程序与内核模块的比较</h3>
<p>​	模块编程属于内核编程。</p>
<p>​	书上有一张应用程序与内核模块程序的比较</p>
<h2 id="1-6-Linux内核中链表的实现及应用"><a class="header-anchor" href="#1-6-Linux内核中链表的实现及应用">¶</a>1.6 Linux内核中链表的实现及应用</h2>
<p>链表是Linux内核中最简单、最常用的一种数据结构</p>
<p><strong>值得注意的是，它们的内存无需占用连续的单元</strong>，每个元素都包含一个指向下一个元素的指针，当有元素加入时，只要改变这个指针即可</p>
<h3 id="1-6-1-链表的演化"><a class="header-anchor" href="#1-6-1-链表的演化">¶</a>1.6.1 链表的演化</h3>
<p>C语言中最基本的双向链表结构：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">my_List</span>{</span></span><br><span class="line">    <span class="keyword">void</span> *mydata;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">my_List</span> *<span class="title">next</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">my_list</span> *<span class="title">prev</span>;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>在此基础上做一些变化，可以得到二叉树、循环链表以及更多复杂的树状结构</p>
<h3 id="1-6-2-链表的定义和操作"><a class="header-anchor" href="#1-6-2-链表的定义和操作">¶</a>1.6.2 链表的定义和操作</h3>
<p>来看下Linux内核的实现方式​​</p>
<h4 id="（1）链表的定义"><a class="header-anchor" href="#（1）链表的定义">¶</a>（1）链表的定义</h4>
<p>首先定义一个不含数据域的链表结点</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">list_head</span>{</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> *<span class="title">next</span>, *<span class="title">prev</span>;</span><span class="comment">//注意写的时候prev前面要加*</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>我们把这个嵌入到别的结构中，来形成具有数据域的链表：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">my_List</span>{</span></span><br><span class="line">    <span class="keyword">void</span> *mydata;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">list</span>;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h4 id="（2）链表的声明和初始化宏"><a class="header-anchor" href="#（2）链表的声明和初始化宏">¶</a>（2）链表的声明和初始化宏</h4>
<p>在list.h中定义了宏来实现声明和初始化的操作，所以我们可以方便地使用<code>LIST_HEAD(my_listhead)</code>来创造一个空链表，头指针就是<code>my_listhead</code></p>
<h4 id="（3）在链表中增加一个结点"><a class="header-anchor" href="#（3）在链表中增加一个结点">¶</a>（3）在链表中增加一个结点</h4>
<p><strong>在内核代码中，函数名前加两个下划线表示内部函数</strong></p>
<p>list.h中增加结点的函数是：</p>
<figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">list_add</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">list_add_tail</span><span class="params">()</span></span>;</span><br></pre></td></tr></tbody></table></figure>
<h4 id="（4）遍历链表"><a class="header-anchor" href="#（4）遍历链表">¶</a>（4）遍历链表</h4>
<p>有点没看懂，用到的时候再回头看吧</p>
<h3 id="1-6-3-链表的应用"><a class="header-anchor" href="#1-6-3-链表的应用">¶</a>1.6.3 链表的应用</h3>
<p>比如，可以利用list.h中的函数，编写用以创建、增加、删除和遍历一个双向链表的Linux内核模块</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/23/Chapter3-%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E5%92%8C%E6%B6%88%E6%81%AF%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/23/Chapter3-%E5%85%AC%E9%92%A5%E5%AF%86%E7%A0%81%E5%92%8C%E6%B6%88%E6%81%AF%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">Chapter3 公钥密码和消息认证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-23 12:06:11" itemprop="dateCreated datePublished" datetime="2020-09-23T12:06:11+08:00">2020-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-04 16:24:56" itemprop="dateModified" datetime="2021-01-04T16:24:56+08:00">2021-01-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BA%94%E7%94%A8%E4%B8%8E%E6%A0%87%E5%87%86%EF%BC%88E5%EF%BC%89%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《网络安全基础：应用与标准（E5）》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="3-1-消息认证方法"><a class="header-anchor" href="#3-1-消息认证方法">¶</a>3.1 消息认证方法</h2>
<h3 id="3-1-0-引言"><a class="header-anchor" href="#3-1-0-引言">¶</a>3.1.0 引言</h3>
<p>加密这个手段，自然的就可以防止被动攻击了；不过我们还需要满足防止主动攻击（伪造数据和业务）的需求————对应的办法就是消息认证。<br>
首先，什么是可信？<br>
可信就是，数据真实且来自合法来源，消息认证就是认证数据可不可信的。<br>
对应着可信的两方面定义，认证要做的就是判断消息被篡改与否+来源合法与否，此外还有可能要验证数据时效性、消息流顺序等等</p>
<h3 id="3-1-1-利用常规加密的消息认证"><a class="header-anchor" href="#3-1-1-利用常规加密的消息认证">¶</a>3.1.1 利用常规加密的消息认证</h3>
<p>常规就是说简单的对称加密这样子，但是对于分组对称加密会出现问题。<br>
假如攻击者想换动消息流之间的顺序，那么由于是分组的，所以B还是能每组都正常解密……<br>
但通常情况下，分组的重排其实还是能算是一种威胁</p>
<h3 id="3-1-2-非加密的消息认证"><a class="header-anchor" href="#3-1-2-非加密的消息认证">¶</a>3.1.2 非加密的消息认证</h3>
<h4 id="（1）认证与加密"><a class="header-anchor" href="#（1）认证与加密">¶</a>（1）认证与加密</h4>
<p>把这两个词放一起的时候，我常常感觉……很迷糊，现在理一理：<br>
一般来说认证和加密是两个功能，说一句话可能会让关系更明白：</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">比如我们有一个对消息作处理的算法，这里面可以包含两步操作：先对消息加密，再打上认证标签；这样我们就可以说：把消息的认证和保密结合起来了</span><br></pre></td></tr></tbody></table></figure>
<p>在满足安全需求这件事上，认证和加密是各有应用场景的</p>
<h4 id="（2）什么时候可以不加密只认证呢？"><a class="header-anchor" href="#（2）什么时候可以不加密只认证呢？">¶</a>（2）什么时候可以不加密只认证呢？</h4>
<ol>
<li>相同消息广播时，只由一端负责监控的系统执行认证（不是很理解，直观是什么样的？）</li>
<li>交换信息时，某一端负载太大不能全部解密，就会随机抽一些进行认证</li>
<li>程序可以用明文+认证标签，节省处理器解密的消耗</li>
</ol>
<h4 id="（3）消息认证码MAC"><a class="header-anchor" href="#（3）消息认证码MAC">¶</a>（3）消息认证码MAC</h4>
<p>定义：用私钥产生一小块数据，它可以作为MAC<br>
工作流程：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/MAC.png" alt=""></p>
<ul>
<li>A和B共享一个密钥K</li>
<li>A给B发消息的时候，A用(消息+K)生成MAC，再把消息和MAC一起发给B</li>
<li>B收到以后，算一算MAC对不对</li>
</ul>
<p><em>值得注意的是，认证算法不需要可逆，因为B验证的时候和A是一样的操作（与加密相比更不容易被破）</em></p>
<h4 id="（4）单向散列函数"><a class="header-anchor" href="#（4）单向散列函数">¶</a>（4）单向散列函数</h4>
<p>这是MAC的一种替代品，不同之处在于：<strong>MAC需要密钥而单向散列不需要</strong>，它只是输入M得到H(M)而已。</p>
<p>H函数可以有以下三种形式：</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/HASH.png" alt=""></p>
<ul>
<li>传统加密：先hash再加密</li>
<li>公钥加密：先hash再用公钥加密</li>
<li>秘密值加密：原消息与秘密值Secret一起hash，结果和原消息拼接</li>
</ul>
<p>（详细见P50-51）</p>
<h2 id="3-2-安全散列函数"><a class="header-anchor" href="#3-2-安全散列函数">¶</a>3.2 安全散列函数</h2>
<h3 id="3-2-1-散列函数的要求"><a class="header-anchor" href="#3-2-1-散列函数的要求">¶</a>3.2.1 散列函数的要求</h3>
<ol>
<li>输入长度不受限制</li>
<li>输出长度固定</li>
<li>从x——&gt;H(x)容易计算</li>
<li>单向性/抗原像攻击性：从H(x)——&gt;x计算上不可行</li>
<li>抗弱碰撞攻击性/抗第二原像攻击性：对于x，找一个和它哈希值相同的y从计算上不可行</li>
<li>抗碰撞性/抗强碰撞性：找到任意一对哈希值相同的x，y计算上不可行（可以防止生日攻击）</li>
</ol>
<h3 id="3-2-2-散列函数的安全性"><a class="header-anchor" href="#3-2-2-散列函数的安全性">¶</a>3.2.2 散列函数的安全性</h3>
<p>攻击方法：密码分析法+蛮力攻击法<br>
前者利用密码算法的缺陷，后者是要付出指数级代价的（不过2004年王小云教授破了MD5！）</p>
<h3 id="3-2-3-简单散列函数"><a class="header-anchor" href="#3-2-3-简单散列函数">¶</a>3.2.3 简单散列函数</h3>
<h4 id="（1）散列函数基本原理"><a class="header-anchor" href="#（1）散列函数基本原理">¶</a>（1）散列函数基本原理</h4>
<p>把消息按照n比特每块划分，迭代地每次处理一块，最后生成n比特的散列函数</p>
<h4 id="（2）一种最简单的散列函数"><a class="header-anchor" href="#（2）一种最简单的散列函数">¶</a>（2）一种最简单的散列函数</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230095511.png" alt=""></p>
<p>对于随机数据的完整性校验很有效，书上有一些数学推导和改进；但是这些改进并不是很有效……</p>
<p>举个例子，如果我们想替换一个假消息上去，为了让散列函数不变，我们可以根据需要附加一个n比特的数据块，想怎么调怎么调，非常容易生成相同的散列码……所以我们可以考虑散列码拼在消息后面以后，对整个进行加密</p>
<h3 id="3-2-4-SHA安全散列函数"><a class="header-anchor" href="#3-2-4-SHA安全散列函数">¶</a>3.2.4 SHA安全散列函数</h3>
<p>SHA-1有时候也叫加密散列码，码和函数貌似差不多，不要纠结<br>
经过一段时间的发展，现在主要是用SHA-2：</p>
<blockquote>
<p>SHA-2，名称来自于安全散列算法2（英语：Secure Hash Algorithm 2）的缩写，一种密码散列函数算法标准，由美国国家安全局研发[3]，由美国国家标准与技术研究院（NIST）在2001年发布。属于SHA算法之一，是SHA-1的后继者。其下又可再分为六个不同的算法标准，包括了  ：SHA-224、SHA-256、SHA-384、SHA-512、SHA-512/224、SHA-512/256。<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230104252.png" alt=""></p>
</blockquote>
<p>这里介绍一下SHA-512：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE2.png" alt=""></p>
<p>（？）M和K是干嘛的？</p>
<p>书上有些安全性的数学表达</p>
<h2 id="3-3-消息认证码MAC"><a class="header-anchor" href="#3-3-消息认证码MAC">¶</a>3.3 消息认证码MAC</h2>
<h3 id="3-3-1-HMAC"><a class="header-anchor" href="#3-3-1-HMAC">¶</a>3.3.1 HMAC</h3>
<h4 id="（1）为什么会有HMAC呢？"><a class="header-anchor" href="#（1）为什么会有HMAC呢？">¶</a>（1）为什么会有HMAC呢？</h4>
<p>首先，由于SHA-1软件实现速度快、有许多共享的Hash函数代码库等优点，人们逐渐将它用于MAC。但是为了<strong>把密钥合并到散列算法</strong>中（本身做散列函数是不需要密钥的），人们开发出了HMAC</p>
<h4 id="（2）HMAC的设计目标"><a class="header-anchor" href="#（2）HMAC的设计目标">¶</a>（2）HMAC的设计目标</h4>
<ul>
<li>不用大改散列函数</li>
<li>嵌入的散列函数可移植，便于二次开发</li>
<li>保持性能</li>
<li>使用、处理密钥简单</li>
<li>知散列函数强度——&gt;知HMAC强度</li>
</ul>
<p><strong>把散列函数模块化是个不错的做法</strong></p>
<h4 id="（3）HMAC的算法设计"><a class="header-anchor" href="#（3）HMAC的算法设计">¶</a>（3）HMAC的算法设计</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE12.png" alt=""></p>
<h3 id="3-3-2-基于分组密码的MAC"><a class="header-anchor" href="#3-3-2-基于分组密码的MAC">¶</a>3.3.2 基于分组密码的MAC</h3>
<h4 id="（1）基于密文的消息认证码CMAC"><a class="header-anchor" href="#（1）基于密文的消息认证码CMAC">¶</a>（1）基于密文的消息认证码CMAC</h4>
<p>适用于AES和3DES</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230125126.png" alt=""></p>
<h4 id="（2）具有密码块链式信息认证码的计数器CCM"><a class="header-anchor" href="#（2）具有密码块链式信息认证码的计数器CCM">¶</a>（2）具有密码块链式信息认证码的计数器CCM</h4>
<p>（？）好迷惑的名字</p>
<p>又叫认证加密模式<br>
CCM=AES+CTR操作模式（2.5节提过）+CMAC认证算法</p>
<p>认证和加密一直是被设计成两种单独的服务的，前者保证可靠性（完整性），后者保证机密性</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230130735.png" alt=""></p>
<p>感觉有点改进后的散列算法的味道，最后送出的是加密的消息+加密的标签（由消息生成）</p>
<h2 id="3-4-公钥密码原理"><a class="header-anchor" href="#3-4-公钥密码原理">¶</a>3.4 公钥密码原理</h2>
<h3 id="3-4-1-公钥密码思想"><a class="header-anchor" href="#3-4-1-公钥密码思想">¶</a>3.4.1 公钥密码思想</h3>
<p>公钥密码基于数学函数，可以用于加密、消息认证、密钥分发</p>
<h4 id="（1）常见误解"><a class="header-anchor" href="#（1）常见误解">¶</a>（1）常见误解</h4>
<ul>
<li>公钥比对称密码更安全</li>
<li>公钥密码淘汰了传统密码</li>
<li>公钥密码实现的密钥分发比传统密码简单的多</li>
</ul>
<p>以上，都是错的</p>
<h4 id="（2）公钥密码的组成"><a class="header-anchor" href="#（2）公钥密码的组成">¶</a>（2）公钥密码的组成</h4>
<ul>
<li>明文、密文</li>
<li>公钥、私钥</li>
<li>加密算法、解密算法</li>
</ul>
<p>都是成双成对哒~</p>
<h4 id="（3）公钥密码算法基本流程"><a class="header-anchor" href="#（3）公钥密码算法基本流程">¶</a>（3）公钥密码算法基本流程</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230132126.png" alt=""></p>
<h3 id="3-4-2-公钥密码系统的应用"><a class="header-anchor" href="#3-4-2-公钥密码系统的应用">¶</a>3.4.2 公钥密码系统的应用</h3>
<p>发送者用什么，有三种情况：</p>
<ul>
<li>用自己私钥：数字签名1</li>
<li>用对方公钥：加密/解密2</li>
<li>两者都用</li>
</ul>
<p>3密钥交换：双方互换会话密钥</p>
<p>123是公钥密码的三种应用，不同的算法对这几种应用的支持也不同</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230132641.png" alt=""></p>
<h3 id="3-4-3-公钥密码的要求"><a class="header-anchor" href="#3-4-3-公钥密码的要求">¶</a>3.4.3 公钥密码的要求</h3>
<p>见书P63</p>
<h2 id="3-5-公钥密码算法"><a class="header-anchor" href="#3-5-公钥密码算法">¶</a>3.5 公钥密码算法</h2>
<p>本节重点介绍RSA+DH，简要介绍DSS+椭圆曲线</p>
<h3 id="3-5-1-RSA"><a class="header-anchor" href="#3-5-1-RSA">¶</a>3.5.1 RSA</h3>
<p>基于大数分解的困难</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230140625.png" alt=""></p>
<h3 id="3-5-2-Diffie-Hellman"><a class="header-anchor" href="#3-5-2-Diffie-Hellman">¶</a>3.5.2 Diffie-Hellman</h3>
<p>基于离散对数计算的困难</p>
<p>由于DH只有密钥交换的应用，所以通常被叫做DH密钥交换</p>
<h4 id="（1）算法"><a class="header-anchor" href="#（1）算法">¶</a>（1）算法</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230141939.png" alt=""></p>
<p>这种会受到中间人攻击，见（3）</p>
<h4 id="（2）使用DH的另外一个例子"><a class="header-anchor" href="#（2）使用DH的另外一个例子">¶</a>（2）使用DH的另外一个例子</h4>
<p>见书P68</p>
<h4 id="（3）DH的中间人攻击"><a class="header-anchor" href="#（3）DH的中间人攻击">¶</a>（3）DH的中间人攻击</h4>
<p>见书P68-69</p>
<h3 id="3-5-3-其他公钥密码算法"><a class="header-anchor" href="#3-5-3-其他公钥密码算法">¶</a>3.5.3 其他公钥密码算法</h3>
<h4 id="（1）ECC"><a class="header-anchor" href="#（1）ECC">¶</a>（1）ECC</h4>
<h4 id="（2）DSS"><a class="header-anchor" href="#（2）DSS">¶</a>（2）DSS</h4>
<h2 id="3-6-数字签名"><a class="header-anchor" href="#3-6-数字签名">¶</a>3.6 数字签名</h2>
<p>应用场景：Bob希望给Alice发送消息，消息保不保密不重要，但是需要Alice能确认这条消息确实来自于他；所以用Bob的私钥加密的消息就叫做数字签名</p>
<p>数字签名保证可靠性+完整性（没有Bob的私钥是不能篡改消息的）</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/23/Chapter4-%E5%AF%86%E9%92%A5%E5%88%86%E9%85%8D%E5%92%8C%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/23/Chapter4-%E5%AF%86%E9%92%A5%E5%88%86%E9%85%8D%E5%92%8C%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81/" class="post-title-link" itemprop="url">Chapter4 密钥分配和用户认证</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-23 10:42:15" itemprop="dateCreated datePublished" datetime="2020-09-23T10:42:15+08:00">2020-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-01-06 01:07:21" itemprop="dateModified" datetime="2021-01-06T01:07:21+08:00">2021-01-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BA%94%E7%94%A8%E4%B8%8E%E6%A0%87%E5%87%86%EF%BC%88E5%EF%BC%89%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《网络安全基础：应用与标准（E5）》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="4-1-基于对称加密的密钥分配"><a class="header-anchor" href="#4-1-基于对称加密的密钥分配">¶</a>4.1 基于对称加密的密钥分配</h2>
<p>在对称加密的情境下，双方需要共享同一个密钥，并且只能他两知道。A，B有这几种选择：</p>
<ol>
<li>A选密钥，物理方法传给B</li>
<li>第三方选密钥，物理方法传给A、B</li>
<li>（A、B不久前用过一个共同密钥）A/B把旧密钥加密的新密钥给B/A</li>
<li>（A、B各有到达第三方C的加密链路）C在加密链路上传给A、B</li>
</ol>
<p>主要讲讲第四种，其中需要两种密钥：</p>
<ul>
<li>会话密钥：一次性的，双方想说话的时候才有，用完就销毁</li>
<li>永久密钥：用于分发会话密钥（注意不是只有一个，是KDC与A之间有一个，KDC与B之间有一个的概念）</li>
</ul>
<p>其中提到的第三方C其实有个学名：密钥分发中心KDC，它有如下任务：</p>
<ul>
<li>决定哪些系统之间可以通信</li>
<li>可以的话，负责分发会话密钥</li>
</ul>
<p>KDC的操作过程：</p>
<ol>
<li>A想和B说话了</li>
<li>A用主密钥（？）（只有A和KDC共享），给KDC发请求包</li>
<li>KDC判断允不允许，允许的话则产生一次性会话密钥
<ul>
<li>用永久密钥（KDC与A）加密会话密钥，发给A</li>
<li>用永久密钥（KDC与B）加密会话密钥，发给A</li>
</ul>
</li>
<li>A、B可以通话了！</li>
</ol>
<p>实现了上述操作过程的一种服务是Kerberos</p>
<h2 id="4-2-Kerberos"><a class="header-anchor" href="#4-2-Kerberos">¶</a>4.2 Kerberos</h2>
<h3 id="4-2-0-引言"><a class="header-anchor" href="#4-2-0-引言">¶</a>4.2.0 引言</h3>
<h4 id="（1）要解决的问题"><a class="header-anchor" href="#（1）要解决的问题">¶</a>（1）要解决的问题</h4>
<p>分布式环境中，控制访问权限，为用户<strong>提供认证服务</strong></p>
<h4 id="（2）三种威胁"><a class="header-anchor" href="#（2）三种威胁">¶</a>（2）三种威胁</h4>
<ol>
<li>用户可以伪装成其他用户</li>
<li>伪造网络地址发消息</li>
<li>监听消息/重放攻击</li>
</ol>
<p>Kerberos<strong>仅依赖于对称加密</strong>；此外，版本4逐渐被淘汰，现在常用版本5</p>
<h3 id="4-2-1-Kerberos版本4"><a class="header-anchor" href="#4-2-1-Kerberos版本4">¶</a>4.2.1 Kerberos版本4</h3>
<p>接下来逐步介绍到协议</p>
<h4 id="（1）一个简单的认证会话"><a class="header-anchor" href="#（1）一个简单的认证会话">¶</a>（1）一个简单的认证会话</h4>
<p>来看下面这个会话：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE60.png" alt=""></p>
<p>书上说明了第（3）步中消息每一部分的必要性</p>
<h4 id="（2）一个更安全的认证会话"><a class="header-anchor" href="#（2）一个更安全的认证会话">¶</a>（2）一个更安全的认证会话</h4>
<p>上述方式仍然存在问题：</p>
<ul>
<li>用户可能访问不同服务器，甚至多次访问同一服务器时，都要重新输入密码</li>
<li>消息（1）是明文传送口令的，被窃听了就完了QWQ</li>
</ul>
<p>为了解决上述问题，我们作如下改进：</p>
<ul>
<li>引入票据服务器TGS</li>
<li>提出避免明文传口令的方案</li>
</ul>
<p>具体流程如下：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201230230940.png" alt=""></p>
<h4 id="（3）真正的Kerbores认证对话！"><a class="header-anchor" href="#（3）真正的Kerbores认证对话！">¶</a>（3）真正的Kerbores认证对话！</h4>
<p>没想到吧……上面的图已经那么完备了却还是存在缺陷……那么问题在哪呢？</p>
<ul>
<li>票据的有效期太长也不好，太短也不好；根本问题是，服务器要能判断持有票据的是正确的人</li>
<li>服务器也有被假冒的风险，所以它要向用户证明自己的身份</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE112.png" alt=""></p>
<h3 id="4-2-1-Kerberos版本5"><a class="header-anchor" href="#4-2-1-Kerberos版本5">¶</a>4.2.1 Kerberos版本5</h3>
<h4 id="（1）版本4与版本5的不同"><a class="header-anchor" href="#（1）版本4与版本5的不同">¶</a>（1）版本4与版本5的不同</h4>
<h4 id="（2）版本5的认证对话"><a class="header-anchor" href="#（2）版本5的认证对话">¶</a>（2）版本5的认证对话</h4>
<h2 id="4-3-基于非对称加密的密钥分配"><a class="header-anchor" href="#4-3-基于非对称加密的密钥分配">¶</a>4.3 基于非对称加密的密钥分配</h2>
<h3 id="4-3-0-引言"><a class="header-anchor" href="#4-3-0-引言">¶</a>4.3.0 引言</h3>
<p>公钥加密一个重要作用：处理密钥分发（公钥的分发+使用公钥加密分发私钥）</p>
<h3 id="4-3-1-公钥证书"><a class="header-anchor" href="#4-3-1-公钥证书">¶</a>4.3.1 公钥证书</h3>
<ul>
<li>为什么要有公钥证书？<br>
就像邮箱、银行卡号这种公钥，它们是广而告之的；但是你怎么知道他说这是就是呢？万一伪造了呢？所以我们引入第三方、公钥证书这些来验证。</li>
<li>X.509标准是人们广泛接受的公钥证书格式</li>
</ul>
<h3 id="4-3-2-基于公钥密码的秘密密钥分发"><a class="header-anchor" href="#4-3-2-基于公钥密码的秘密密钥分发">¶</a>4.3.2 基于公钥密码的秘密密钥分发</h3>
<p>对称密钥中，任何一对通信者之间共享唯一密钥是前提，之后才能安全通信<br>
我们会想到之前提过的DH密钥交换，但是这不能认证双方；所以这里提出“公钥证书”的概念<br>
考虑如下操作步骤（当B想要发消息给A的时候）：</p>
<ul>
<li>使用一次性+传统的+会话密钥，加密消息</li>
<li>用A的公钥加密会话密钥（问题所在：B怎么得到A的公钥的？——&gt;通过A的公钥证书）</li>
<li>把加密后的会话密钥和加密后的消息放在一起送给A</li>
</ul>
<h2 id="4-4-X-509证书"><a class="header-anchor" href="#4-4-X-509证书">¶</a>4.4 X.509证书</h2>
<h3 id="4-4-0-引言"><a class="header-anchor" href="#4-4-0-引言">¶</a>4.4.0 引言</h3>
<p>X.500是一个系列推荐标准(?)，定义了一套目录服务：</p>
<blockquote>
<p>目录服务就是，有用于维护用户信息数据库的一个或一组分布式服务器。信息包括：用户名到网络地址的映射，以及用户其他信息</p>
</blockquote>
<p>X.509是X.500推荐标准系列中的一部分，定义了一个使用X.500目录向用户提供认证服务的框架，</p>
<ul>
<li>该目录就可以作为公钥证书存储库（公钥证书=用户的公钥+可信任的认证中心的私钥签名）</li>
<li>X.509还定义了一个基于公钥证书的认证协议</li>
</ul>
<p>下图表示了公钥证书的产生：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231110704.png" alt=""></p>
<h3 id="4-4-1-证书"><a class="header-anchor" href="#4-4-1-证书">¶</a>4.4.1 证书</h3>
<h4 id="（1）公钥证书使用步骤"><a class="header-anchor" href="#（1）公钥证书使用步骤">¶</a>（1）公钥证书使用步骤</h4>
<ul>
<li>可信任的认证中心CA为用户创建证书</li>
<li>CA/用户把证书放到目录服务器</li>
<li>目录服务器提供一个方便访问证书的场所</li>
</ul>
<h4 id="（2）X-509定义的公钥证书格式"><a class="header-anchor" href="#（2）X-509定义的公钥证书格式">¶</a>（2）X.509定义的公钥证书格式</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231130854.png" alt=""></p>
<p><strong>CA用自己的私钥对证书签名，用户知道CA的公钥的话，就可以解密，验证证书是否合法</strong></p>
<p>这其实是一个典型的数字签名过程，可以如下描述：<br>
<img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231130247.png" alt=""></p>
<h4 id="（3）CA生成的公钥证书的特征"><a class="header-anchor" href="#（3）CA生成的公钥证书的特征">¶</a>（3）CA生成的公钥证书的特征</h4>
<ul>
<li>用户可以用CA的公钥去解密证书，看里面的用户公钥，以验证</li>
<li>只有CA才可以修改用户证书；证书不可伪造，所以放到目录服务器里不需要采取额外保护措施</li>
</ul>
<h4 id="（4）证书链"><a class="header-anchor" href="#（4）证书链">¶</a>（4）证书链</h4>
<p>先来看一种情境，假如一个CA负责了很多用户的证书，那么它要给所有用户发一个自己的公钥的副本，以便他们可以用这个公钥去解密证书以验证其合法性。<br>
那么如果，有一个假CA出来，用自己的私钥签了证书，并给用户自己的公钥；这个私钥和公钥仍然是匹配的，又由于用户只看能不能解密来证明其合法性……所以说，太多用户的时候，可以使用多个CA</p>
<p>多个CA会是什么情况呢？假如A从X1那里拿了证书，B从X2；然后A去看B的证书，能获取是能获取，但是拿到手上也没用，因为A没有X2的公钥，不能验证里面的签名，也就不能确定这个是B的证书……</p>
<p>一种解决方案是，X1和X2事先交换过公钥，然后就可以：</p>
<ol>
<li>A在目录中拿到X1签名的X2证书（X2的公钥证书，把X2当成一个普通用户的话）,即<code>X1&lt;&lt;X2&gt;&gt;</code></li>
<li>A有X1的公钥，所以A从<code>X1&lt;&lt;X2&gt;&gt;——&gt;X2</code>，也就是拿到了X2的公钥</li>
<li>A去拿由X2签名的B的证书，即<code>X2&lt;&lt;B&gt;&gt;</code>，解密拿到B，也就是知道了B的公钥</li>
</ol>
<p>A获取B的公钥的过程可以描述为：X1&lt;<x2>&gt;X2&lt;<b>&gt;<br>
同理，B获取A的公钥的过程为：<code>X2&lt;&lt;X1&gt;&gt;X1&lt;&lt;A&gt;&gt;</code></b></x2></p><b>
<p>更普遍的过程可以描述为：</p>
<pre><code>X1&lt;&lt;X2&gt;&gt;X2&lt;&lt;X3&gt;&gt;...XN&lt;&lt;B&gt;&gt;
</code></pre>
<p>相邻的两个X应该互相生成过证书，为了更明确这个关系，我们用下图来描述：</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/%E7%BB%98%E5%9B%BE138.png" alt=""></p>
<h4 id="（5）证书撤销"><a class="header-anchor" href="#（5）证书撤销">¶</a>（5）证书撤销</h4>
<p>一般都是自然过期，不过有以下情况需要提前撤销：<br>
见书P98</p>
<p>用户从消息中取得证书的时候，需要确认它是否被取消</p>
<h3 id="4-4-2-X-509版本3"><a class="header-anchor" href="#4-4-2-X-509版本3">¶</a>4.4.2 X.509版本3</h3>
<h4 id="（1）X-509版本2没有满足的要求"><a class="header-anchor" href="#（1）X-509版本2没有满足的要求">¶</a>（1）X.509版本2没有满足的要求</h4>
<p>见书P98</p>
<h4 id="（2）X-509版本3的改变"><a class="header-anchor" href="#（2）X-509版本3的改变">¶</a>（2）X.509版本3的改变</h4>
<p>加入扩展部分，更加灵活</p>
<p>扩展=一个扩展标识+一个危险指示符+一个扩展值<br>
危险指示符：标识一个扩展是否可以被安全地忽略，True则可</p>
<p>证书扩展可以分为三个主要类型：</p>
<ul>
<li>密钥和策略信息</li>
<li>主体和发放者属性</li>
<li>认证路径约束</li>
</ul>
<h4 id="（3）密钥和策略信息"><a class="header-anchor" href="#（3）密钥和策略信息">¶</a>（3）密钥和策略信息</h4>
<p>用处：指示证书对于（一个特定的具有相同安全需求的团体、应用类别）的适用性</p>
<p>域的内容见书P99</p>
<h4 id="（4）主体和发放者属性"><a class="header-anchor" href="#（4）主体和发放者属性">¶</a>（4）主体和发放者属性</h4>
<p>用处：附加一些属性，让别人更相信这个证书是某个人的</p>
<p>域的内容见书P99</p>
<h4 id="（5）认证路径约束"><a class="header-anchor" href="#（5）认证路径约束">¶</a>（5）认证路径约束</h4>
<p>用处：限制主体CA可以发放的证书类型，或限制在认证链中随后可以出现的证书类型</p>
<p>域的内容见书P99</p>
<h2 id="4-5-公钥基础设施KPI"><a class="header-anchor" href="#4-5-公钥基础设施KPI">¶</a>4.5 公钥基础设施KPI</h2>
<h3 id="4-5-0-引言"><a class="header-anchor" href="#4-5-0-引言">¶</a>4.5.0 引言</h3>
<ul>
<li>PKI是什么？<br>
之所以叫基础设施：包含了硬件+软件+人员+策略+过程</li>
<li>那是干什么的基础设施？<br>
公钥密码中，用于生成+管理+存储+分配+撤销数字证书</li>
<li>PKIX是什么？<br>
基于X.509的PKI</li>
<li>所以具体来说，PKIX包括些什么呢？</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231152633.png" alt=""></p>
<h3 id="4-5-1-PKIX管理功能"><a class="header-anchor" href="#4-5-1-PKIX管理功能">¶</a>4.5.1 PKIX管理功能</h3>
<ul>
<li>注册：注册开始了一个PKI中的登记过程</li>
<li>初始化：客户端安装密钥资料</li>
<li>认证：CA发证书</li>
<li>密钥对恢复：</li>
<li>密钥对更新：</li>
<li>撤销申请：CA撤销</li>
<li>交叉认证：两个CA之间</li>
</ul>
<p>上图中粉红色部分</p>
<h3 id="4-5-2-PKIX管理协议"><a class="header-anchor" href="#4-5-2-PKIX管理协议">¶</a>4.5.2 PKIX管理协议</h3>
<p>用来支持上一节列出的管理功能</p>
<h2 id="4-6-联合身份管理"><a class="header-anchor" href="#4-6-联合身份管理">¶</a>4.6 联合身份管理</h2>
<h3 id="4-6-1-身份管理"><a class="header-anchor" href="#4-6-1-身份管理">¶</a>4.6.1 身份管理</h3>
<h4 id="（1）作用"><a class="header-anchor" href="#（1）作用">¶</a>（1）作用</h4>
<p>验证身份以后给对应的资源接口，基于单点登录SSO</p>
<h4 id="（2）基本要素"><a class="header-anchor" href="#（2）基本要素">¶</a>（2）基本要素</h4>
<p>见书P102</p>
<p>值得注意的是，Kerberos包含身份管理系统的许多要素</p>
<h4 id="（3）通用的身份管理系统"><a class="header-anchor" href="#（3）通用的身份管理系统">¶</a>（3）通用的身份管理系统</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231153605.png" alt=""></p>
<h3 id="4-6-2-身份联合"><a class="header-anchor" href="#4-6-2-身份联合">¶</a>4.6.2 身份联合</h3>
<p>身份联合就是将身份管理扩展到多个安全域，也就是说，多个域之间共享用户的数字身份，使得用户只要一次认证就可以接入多个域的应用及其资源</p>
<h4 id="（1）联合身份管理的作用"><a class="header-anchor" href="#（1）联合身份管理的作用">¶</a>（1）联合身份管理的作用</h4>
<ul>
<li>单点登录SSO</li>
<li>表示属性的标准方法：属性可以指口令、生物特征信息、文件所有权等等</li>
<li>身份映射：同一个用户在不同的域中身份和属性可能不同，身份映射可以将一个域的身份和属性映射到另一个域的要求</li>
</ul>
<h4 id="（2）联合身份管理的实体与数据流"><a class="header-anchor" href="#（2）联合身份管理的实体与数据流">¶</a>（2）联合身份管理的实体与数据流</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201231193813.png" alt=""></p>
<h4 id="（3）标准"><a class="header-anchor" href="#（3）标准">¶</a>（3）标准</h4>
<p>联合身份管理使用了一些标准，作为系统的构件，实现在不同的域之间进行安全身份交换的要求：</p>
<ul>
<li>可扩展标记语言XML</li>
<li>简单对象访问协议SOAP</li>
<li>WS-安全</li>
<li>安全断言标记语言SAML：可以传递用户认证信息</li>
</ul>
<p>见书P103-104</p>
<h4 id="（4）例子"><a class="header-anchor" href="#（4）例子">¶</a>（4）例子</h4>
<p>见书P104-105</p>
</b><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/09/21/Chapter2-%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E5%92%8C%E6%B6%88%E6%81%AF%E6%9C%BA%E5%AF%86%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrestinyCoco">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Crestiny's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/21/Chapter2-%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E5%92%8C%E6%B6%88%E6%81%AF%E6%9C%BA%E5%AF%86%E6%80%A7/" class="post-title-link" itemprop="url">Chapter2 对称加密和消息机密性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-21 08:03:01" itemprop="dateCreated datePublished" datetime="2020-09-21T08:03:01+08:00">2020-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-28 13:15:11" itemprop="dateModified" datetime="2020-12-28T13:15:11+08:00">2020-12-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/" itemprop="url" rel="index"><span itemprop="name">Courses</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Courses/%E3%80%8A%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%9F%BA%E7%A1%80%EF%BC%9A%E5%BA%94%E7%94%A8%E4%B8%8E%E6%A0%87%E5%87%86%EF%BC%88E5%EF%BC%89%E3%80%8B/" itemprop="url" rel="index"><span itemprop="name">《网络安全基础：应用与标准（E5）》</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="2-1-对称加密原理"><a class="header-anchor" href="#2-1-对称加密原理">¶</a>2.1 对称加密原理</h2>
<h3 id="2-1-0-对称加密简介"><a class="header-anchor" href="#2-1-0-对称加密简介">¶</a>2.1.0 对称加密简介</h3>
<h4 id="（1）一个对称加密算法的组成"><a class="header-anchor" href="#（1）一个对称加密算法的组成">¶</a>（1）一个对称加密算法的组成</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/model.png" alt=""></p>
<h4 id="（2）对称加密算法的安全性"><a class="header-anchor" href="#（2）对称加密算法的安全性">¶</a>（2）对称加密算法的安全性</h4>
<p>需要达到以下两个要求：</p>
<ul>
<li>强加密算法：（一个很强的条件）攻击者知道算法且有很多密文+密文对应的明文，却不能破译密文，或者解出密钥</li>
<li>密钥安全：Alice和Bob的密钥收发仅两人可得。（因为如果别人得到了他们的密钥，所有使用此密钥的通信都可读）</li>
</ul>
<p><strong>注：对称加密的安全取决于密钥的保密性，算法可公开</strong></p>
<h3 id="2-1-1-密码体制"><a class="header-anchor" href="#2-1-1-密码体制">¶</a>2.1.1 密码体制</h3>
<p>密码体制有以下三个分类标准：</p>
<h4 id="1-明文转换成密文的操作类型"><a class="header-anchor" href="#1-明文转换成密文的操作类型">¶</a>1. 明文转换成密文的操作类型</h4>
<ul>
<li>替换：明文映射到……</li>
<li>换位：明文再排列</li>
</ul>
<p>（注：上述两种操作可以以比特、字母等等为单位）</p>
<h4 id="2-使用的密钥数"><a class="header-anchor" href="#2-使用的密钥数">¶</a>2. 使用的密钥数</h4>
<ul>
<li>AB同一密钥：对称/单钥/秘密密钥/传统加密</li>
<li>AB不同密钥：不对称/双钥/公钥加密</li>
</ul>
<h4 id="3-明文的处理方式"><a class="header-anchor" href="#3-明文的处理方式">¶</a>3. 明文的处理方式</h4>
<ul>
<li>一次处理一个分组：分组密码</li>
<li>明文输入过程中连续处理：流密码</li>
</ul>
<h3 id="2-1-2-密码分析"><a class="header-anchor" href="#2-1-2-密码分析">¶</a>2.1.2 密码分析</h3>
<p>密码分析或破译：找出明文或密钥</p>
<p>根据攻击者掌握的信息量，可将攻击类型分类如下：</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/attack.png" alt=""></p>
<h4 id="1-惟密文攻击"><a class="header-anchor" href="#1-惟密文攻击">¶</a>1. 惟密文攻击</h4>
<p>或许只能穷举……但是也有一些小技巧，比如统计测试（前提是对明文的类型有一个大致的了解）</p>
<h4 id="2-已知明文攻击"><a class="header-anchor" href="#2-已知明文攻击">¶</a>2. 已知明文攻击</h4>
<p>比如某种文件可能有些固定的内容……<br>
<strong>一般密码算法会被设计成能抵挡已知明文攻击的程度</strong></p>
<h4 id="3-选择明文"><a class="header-anchor" href="#3-选择明文">¶</a>3. 选择明文</h4>
<p>攻击者能得到源系统，可以插入自己选定的消息（选定明文，查看密文）</p>
<h4 id="4-选择密文"><a class="header-anchor" href="#4-选择密文">¶</a>4. 选择密文</h4>
<p>是选择明文的反向，不过不太常见</p>
<h4 id="5-选择文本"><a class="header-anchor" href="#5-选择文本">¶</a>5. 选择文本</h4>
<p>选择明文+选择密文的能力，不过不太常见</p>
<p>计算安全的加密方案（妙啊！）：</p>
<ul>
<li>破解密文的代价&gt;明文的价值</li>
<li>破解密文的时间&gt;信息的有用寿命</li>
</ul>
<h3 id="2-1-3-Feistel密码结构"><a class="header-anchor" href="#2-1-3-Feistel密码结构">¶</a>2.1.3 Feistel密码结构</h3>
<h4 id="可以看做是对称密码算法的通用结构"><a class="header-anchor" href="#可以看做是对称密码算法的通用结构">¶</a>可以看做是对称密码算法的通用结构</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/Fiestel.png" alt=""></p>
<h4 id="其中有些可以调整的参数："><a class="header-anchor" href="#其中有些可以调整的参数：">¶</a>其中有些可以调整的参数：</h4>
<ul>
<li>分组大小：折中128bit一组比较常见</li>
<li>密钥大小：越长——越安全——加解密越慢</li>
<li>迭代轮数：典型16</li>
<li>子密钥产生算法：越复杂越安全</li>
<li>轮函数：同上</li>
</ul>
<h4 id="设计算法还需考虑"><a class="header-anchor" href="#设计算法还需考虑">¶</a>设计算法还需考虑</h4>
<ul>
<li>软件执行速度比较快</li>
<li>容易分析——容易找到弱点——随即加固</li>
</ul>
<p><strong>对称密码算法的加解密本质上是相同的过程，不需要实现两个不同的算法</strong></p>
<h2 id="2-2-对称分组加密算法"><a class="header-anchor" href="#2-2-对称分组加密算法">¶</a>2.2 对称分组加密算法</h2>
<h3 id="2-2-1-数据加密标准DES"><a class="header-anchor" href="#2-2-1-数据加密标准DES">¶</a>2.2.1 数据加密标准DES</h3>
<p>说实话，我总是不能把数据加密标准和DES联系在一起，这两个名字，一个像标准，一个像算法哈哈哈哈；但是仔细研究一下发现，其实我的直觉没错<br>
DES准确来说是一种标准，数据加密标准；算法本身其实叫做DEA，略感陌生；一般都直接说DES了</p>
<h4 id="DEA算法描述"><a class="header-anchor" href="#DEA算法描述">¶</a>DEA算法描述</h4>
<p>基本沿用Fiestel结构，参数如下：</p>
<ul>
<li>分组大小：64</li>
<li>密钥大小：56</li>
<li>迭代轮数：典型16</li>
<li>子密钥产生算法：越复杂越安全</li>
<li>轮函数：同上</li>
</ul>
<h4 id="DES的强度"><a class="header-anchor" href="#DES的强度">¶</a>DES的强度</h4>
<ul>
<li>算法本身：至今还没人指出弱点</li>
<li>密钥长度：一定范围内，蛮力攻击还是可行的（所以后来有改进的算法来替代它，如3DES和AES）</li>
</ul>
<h3 id="2-2-2-三重DES"><a class="header-anchor" href="#2-2-2-三重DES">¶</a>2.2.2 三重DES</h3>
<h4 id="3DES流程"><a class="header-anchor" href="#3DES流程">¶</a>3DES流程</h4>
<p>使用三次DES，加密——解密——加密</p>
<h4 id="3DES优点"><a class="header-anchor" href="#3DES优点">¶</a>3DES优点</h4>
<ul>
<li>底层算法与DES相同，之前说过无弱点了</li>
<li>密钥长度168bit，解决了被穷举的问题</li>
</ul>
<h4 id="3DES缺点"><a class="header-anchor" href="#3DES缺点">¶</a>3DES缺点</h4>
<p>软件运行慢</p>
<h3 id="2-2-3-高级加密标准AES"><a class="header-anchor" href="#2-2-3-高级加密标准AES">¶</a>2.2.3 高级加密标准AES</h3>
<p>替代3DES，安全性&gt;=，效率&gt;=</p>
<h4 id="AES流程"><a class="header-anchor" href="#AES流程">¶</a>AES流程</h4>
<p>值得注意的是，它不是Feistel结构<br>
（具体可见书30—31页）</p>
<h2 id="2-3-随机数和伪随机数"><a class="header-anchor" href="#2-3-随机数和伪随机数">¶</a>2.3 随机数和伪随机数</h2>
<h3 id="2-3-1-随机数的应用"><a class="header-anchor" href="#2-3-1-随机数的应用">¶</a>2.3.1 随机数的应用</h3>
<h4 id="（1）基于随机数的安全算法"><a class="header-anchor" href="#（1）基于随机数的安全算法">¶</a>（1）基于随机数的安全算法</h4>
<p>RSA、对称流密码的密钥流的生成、密钥分配方案……</p>
<h4 id="（2）应用对随机数的需求"><a class="header-anchor" href="#（2）应用对随机数的需求">¶</a>（2）应用对随机数的需求</h4>
<ol>
<li>随机性：有两个验证标准<br>
（1）均匀分布：一串中，0与1出现概率大致相同<br>
（2）独立：统一序列上，没有数字能影响别人</li>
<li>不可预测性</li>
</ol>
<h3 id="2-3-2-真随机数发生器TRNG、伪随机数生成器PRNG和伪随机函数PRF"><a class="header-anchor" href="#2-3-2-真随机数发生器TRNG、伪随机数生成器PRNG和伪随机函数PRF">¶</a>2.3.2 真随机数发生器TRNG、伪随机数生成器PRNG和伪随机函数PRF</h3>
<p>首先要明白，什么是统计上的随机性？（？）</p>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/random.png" alt=""></p>
<p>伪随机数发生器和伪随机函数的区别在于产生的比特数不同</p>
<h3 id="2-3-3-算法设计"><a class="header-anchor" href="#2-3-3-算法设计">¶</a>2.3.3 算法设计</h3>
<p>PRNG的算法可以分为两类：</p>
<h4 id="1-为特定目的构造的算法"><a class="header-anchor" href="#1-为特定目的构造的算法">¶</a>1. 为特定目的构造的算法</h4>
<ul>
<li>用于PRNG应用程序</li>
<li>有些算法专门被设计用在流密码中（如流密码）</li>
</ul>
<h4 id="2-基于现存密码算法的算法-、"><a class="header-anchor" href="#2-基于现存密码算法的算法-、">¶</a>2. 基于现存密码算法的算法          、</h4>
<p>有些密码算法可以嵌在PRNG应用中，作为其核心算法，比如：</p>
<ul>
<li>对称的分组密码</li>
<li>不对称的密码</li>
<li>散列函数和消息认证码</li>
</ul>
<h2 id="2-4-流密码和RC4"><a class="header-anchor" href="#2-4-流密码和RC4">¶</a>2.4 流密码和RC4</h2>
<p>分组密码更普遍，但对于特定应用还是要用流密码的。<br>
流密码就是一次产生一个输出元素，我觉得和分组密码的区别就像：前者是python命令行一句句解释，后者是python IDE一整个程序给个解释<br>
最对称的流密码可以说是RC4了哈哈哈哈</p>
<h3 id="2-4-1-流密码结构"><a class="header-anchor" href="#2-4-1-流密码结构">¶</a>2.4.1 流密码结构</h3>
<h4 id="（1）流密码结构示意图"><a class="header-anchor" href="#（1）流密码结构示意图">¶</a>（1）流密码结构示意图</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/flow.png" alt=""></p>
<p>解释一下：首先呢，你要先有个密钥K，把它投入伪随机字节生成器里面得到密钥流k；k和明文异或就得到密文字节流啦。由于是对称的，加密解密用同一个密钥</p>
<h4 id="2-设计流密码的考虑因素"><a class="header-anchor" href="#2-设计流密码的考虑因素">¶</a>(2)设计流密码的考虑因素</h4>
<ul>
<li>加密序列有个长周期：意思是，其实伪随机字节生成器生成的是周期性循环的确定字节流，如果周期太短容易被破</li>
<li>生成的密钥流最好能通过随机数检测那些</li>
<li>PRNG的输入要足够长以便不会被穷举</li>
</ul>
<h4 id="3-流密码优点"><a class="header-anchor" href="#3-流密码优点">¶</a>(3)流密码优点</h4>
<ul>
<li>比分组密码快，代码少</li>
</ul>
<h4 id="4-分组密码优点"><a class="header-anchor" href="#4-分组密码优点">¶</a>(4)分组密码优点</h4>
<ul>
<li>分组密码可以重复使用密钥，但是流密码的密钥最好不要重复用不然容易被破<br>
若已知两个密文流，将它们进行异或，结果=对应两个明文流的异或</li>
</ul>
<h3 id="2-4-2-RC4算法"><a class="header-anchor" href="#2-4-2-RC4算法">¶</a>2.4.2 RC4算法</h3>
<h4 id="1-RC4算法"><a class="header-anchor" href="#1-RC4算法">¶</a>(1)RC4算法</h4>
<ul>
<li>初始化
<ul>
<li>S是个状态向量，有256维，刚开始从0-255维依次设为0-255；</li>
<li>K为密钥（1-256字节可变）；</li>
<li>T为临时向量（256维），T的赋值即将K循环利用填充进去</li>
</ul>
</li>
<li>S的初始置换：</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">j=0;</span><br><span class="line">for(i=0;i&lt;=255;i++){</span><br><span class="line">	j=(j+S[i]+T[i])mod 256;</span><br><span class="line">	swap(S[i],S[j]);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>密钥流产生：感觉只有对S的置换操作，因为一旦完成S向量的初始置换，就不在需要输入密要了</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/a1.png" alt=""></p>
<h4 id="2-RC4强度"><a class="header-anchor" href="#2-RC4强度">¶</a>(2)RC4强度</h4>
<p>有些特定的攻击方法，但是当密钥长度&gt;128bit时，没有可以成功的。<br>
另外有个有趣的点是：我们发现WEP协议易受攻击从而导致RC4易受攻击，这说明了一条安全系统设计的困难性所在：</p>
<blockquote>
<p>密码算法要安全还不够，密码函数所处的协议也要安全，比如考虑输入输出上下游的安全等等</p>
</blockquote>
<h2 id="2-5-分组密码工作模式"><a class="header-anchor" href="#2-5-分组密码工作模式">¶</a>2.5 分组密码工作模式</h2>
<p>NIST提出了五种工作模式，希望覆盖“用分组密码做加密”的所有应用场景，这里列出了以下四种：</p>
<h3 id="2-5-1-电子密码本ECB模式"><a class="header-anchor" href="#2-5-1-电子密码本ECB模式">¶</a>2.5.1 电子密码本ECB模式</h3>
<h4 id="1-原理"><a class="header-anchor" href="#1-原理">¶</a>(1)原理</h4>
<p>假设明文被分成b比特一组，每个分组都是同一密钥加密的。每个分组对于一个给定的密钥会有一个密文（唯一的结果），但是如果一段明文里有两个完全相同的分组……它们对应的密文也是相同的……</p>
<h4 id="2-不足"><a class="header-anchor" href="#2-不足">¶</a>(2)不足</h4>
<p>如果明文过长以至于出现两个分组重复，就不安全。所以我们希望有上述情况的话，它们会对应两个不同的密文。</p>
<h3 id="2-5-2-密码分组链接CBC模式"><a class="header-anchor" href="#2-5-2-密码分组链接CBC模式">¶</a>2.5.2 密码分组链接CBC模式</h3>
<h4 id="1-原理-v2"><a class="header-anchor" href="#1-原理-v2">¶</a>(1)原理</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/CBC.png" alt=""></p>
<ul>
<li>输入：每组明文和上一组密文的异或</li>
<li>处理：所有分组用同一密钥</li>
</ul>
<h4 id="2-数学推导说明的一些东西"><a class="header-anchor" href="#2-数学推导说明的一些东西">¶</a>(2)数学推导说明的一些东西</h4>
<p>见书P39，说明在接收者收数据准备解密之前，如果Attacker有机会改变初始向量IV，那么P1也会被改变，也就是接收者会解出错误的明文</p>
<h3 id="2-5-3-密码反馈CFB模式"><a class="header-anchor" href="#2-5-3-密码反馈CFB模式">¶</a>2.5.3 密码反馈CFB模式</h3>
<h4 id="（1）作用"><a class="header-anchor" href="#（1）作用">¶</a>（1）作用</h4>
<p>将任意分组密码转化为流密码，为什么要转换呢？是由于有些应用场景下比较适合用流密码：</p>
<ul>
<li>流密码不需要将消息填充为分组大小的整数倍</li>
<li>流密码可以实时操作，也就是说，如果传送字符流，流密码可以使我们及时加密并传送每个字符</li>
<li>流密码的密文长度=明文长度，由于传输能力是一个比较宝贵的资源，我们用分组密码可能导致密文比明文长，从而浪费传输能力</li>
</ul>
<h4 id="（2）原理"><a class="header-anchor" href="#（2）原理">¶</a>（2）原理</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201228130754.png" alt=""></p>
<h3 id="2-5-4-计数器模式CTR"><a class="header-anchor" href="#2-5-4-计数器模式CTR">¶</a>2.5.4 计数器模式CTR</h3>
<h4 id="（1）应用"><a class="header-anchor" href="#（1）应用">¶</a>（1）应用</h4>
<p>（？）</p>
<ul>
<li>异步传输模式的网络安全中</li>
<li>IPSec中</li>
</ul>
<h4 id="（2）原理-v2"><a class="header-anchor" href="#（2）原理-v2">¶</a>（2）原理</h4>
<p><img src="https://raw.githubusercontent.com/Crestiny/BlogImgBed/main/img/20201228130708.png" alt=""></p>
<h4 id="（3）CTR模式优点"><a class="header-anchor" href="#（3）CTR模式优点">¶</a>（3）CTR模式优点</h4>
<ul>
<li>硬件效率：各明文单元可以并行计算</li>
<li>软件效率：由于CTR允许并行计算，所以可以用一些有“并行特征”的指令</li>
<li>预处理：加密部分可以预处理</li>
<li>随机访问：对于只需要解密一部分密文的情况，CTR由于无链接，所以各块之间独立，想解密哪一块并不需要之前的信息</li>
<li>可证明的安全性</li>
<li>简单性：加解密算法完全相同</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CrestinyCoco</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">100</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CrestinyCoco</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  

  

    </div>
  
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>
